{
 "Resources": {
  "LambdaRole3A44B857": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/LambdaRole/Resource"
   }
  },
  "EcsTaskRole8DFA0181": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AWSAppSyncInvokeFullAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/EcsTaskRole/Resource"
   }
  },
  "EcsTaskRoleDefaultPolicy50882C77": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ssmmessages:CreateControlChannel",
        "ssmmessages:CreateDataChannel",
        "ssmmessages:OpenControlChannel",
        "ssmmessages:OpenDataChannel"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "logs:DescribeLogGroups",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:DescribeLogStreams",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "gpuQueue70C24BE4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "gpuQueue70C24BE4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "cpuQueue833173B2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "cpuQueue833173B2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "inputsD1506E74",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "inputsD1506E74",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "outputs444C6E6C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "outputs444C6E6C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "EcsTaskRoleDefaultPolicy50882C77",
    "Roles": [
     {
      "Ref": "EcsTaskRole8DFA0181"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/EcsTaskRole/DefaultPolicy/Resource"
   }
  },
  "mycdkvpc037DA4AF": {
   "Type": "AWS::EC2::VPC",
   "Properties": {
    "CidrBlock": "10.0.0.0/16",
    "EnableDnsHostnames": true,
    "EnableDnsSupport": true,
    "InstanceTenancy": "default",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/Resource"
   }
  },
  "mycdkvpcPublicSubnet1Subnet0CCFA225": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      0,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.0.0/18",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1/Subnet"
   }
  },
  "mycdkvpcPublicSubnet1RouteTableC2716F4D": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1/RouteTable"
   }
  },
  "mycdkvpcPublicSubnet1RouteTableAssociation2B06D461": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "mycdkvpcPublicSubnet1RouteTableC2716F4D"
    },
    "SubnetId": {
     "Ref": "mycdkvpcPublicSubnet1Subnet0CCFA225"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1/RouteTableAssociation"
   }
  },
  "mycdkvpcPublicSubnet1DefaultRoute19FD7680": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "mycdkvpcIGW4220D5A9"
    },
    "RouteTableId": {
     "Ref": "mycdkvpcPublicSubnet1RouteTableC2716F4D"
    }
   },
   "DependsOn": [
    "mycdkvpcVPCGW2444B783"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1/DefaultRoute"
   }
  },
  "mycdkvpcPublicSubnet1EIPC0CEF1CB": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1/EIP"
   }
  },
  "mycdkvpcPublicSubnet1NATGateway3DF5C4E4": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "mycdkvpcPublicSubnet1EIPC0CEF1CB",
      "AllocationId"
     ]
    },
    "SubnetId": {
     "Ref": "mycdkvpcPublicSubnet1Subnet0CCFA225"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1"
     }
    ]
   },
   "DependsOn": [
    "mycdkvpcPublicSubnet1DefaultRoute19FD7680",
    "mycdkvpcPublicSubnet1RouteTableAssociation2B06D461"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet1/NATGateway"
   }
  },
  "mycdkvpcPublicSubnet2Subnet33F973F6": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      1,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.64.0/18",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2/Subnet"
   }
  },
  "mycdkvpcPublicSubnet2RouteTableB1A27A7D": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2/RouteTable"
   }
  },
  "mycdkvpcPublicSubnet2RouteTableAssociation3ADB11EB": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "mycdkvpcPublicSubnet2RouteTableB1A27A7D"
    },
    "SubnetId": {
     "Ref": "mycdkvpcPublicSubnet2Subnet33F973F6"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2/RouteTableAssociation"
   }
  },
  "mycdkvpcPublicSubnet2DefaultRoute32FE0E26": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "mycdkvpcIGW4220D5A9"
    },
    "RouteTableId": {
     "Ref": "mycdkvpcPublicSubnet2RouteTableB1A27A7D"
    }
   },
   "DependsOn": [
    "mycdkvpcVPCGW2444B783"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2/DefaultRoute"
   }
  },
  "mycdkvpcPublicSubnet2EIP2135E277": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2/EIP"
   }
  },
  "mycdkvpcPublicSubnet2NATGatewayE67C5CFB": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "mycdkvpcPublicSubnet2EIP2135E277",
      "AllocationId"
     ]
    },
    "SubnetId": {
     "Ref": "mycdkvpcPublicSubnet2Subnet33F973F6"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2"
     }
    ]
   },
   "DependsOn": [
    "mycdkvpcPublicSubnet2DefaultRoute32FE0E26",
    "mycdkvpcPublicSubnet2RouteTableAssociation3ADB11EB"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PublicSubnet2/NATGateway"
   }
  },
  "mycdkvpcPrivateSubnet1Subnet196BF1EF": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      0,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.128.0/18",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet1/Subnet"
   }
  },
  "mycdkvpcPrivateSubnet1RouteTableD4BD6179": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet1/RouteTable"
   }
  },
  "mycdkvpcPrivateSubnet1RouteTableAssociation7FC64E24": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "mycdkvpcPrivateSubnet1RouteTableD4BD6179"
    },
    "SubnetId": {
     "Ref": "mycdkvpcPrivateSubnet1Subnet196BF1EF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet1/RouteTableAssociation"
   }
  },
  "mycdkvpcPrivateSubnet1DefaultRoute35833E43": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "mycdkvpcPublicSubnet1NATGateway3DF5C4E4"
    },
    "RouteTableId": {
     "Ref": "mycdkvpcPrivateSubnet1RouteTableD4BD6179"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet1/DefaultRoute"
   }
  },
  "mycdkvpcPrivateSubnet2SubnetC5D2ACEF": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      1,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.192.0/18",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet2/Subnet"
   }
  },
  "mycdkvpcPrivateSubnet2RouteTableE3606704": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet2/RouteTable"
   }
  },
  "mycdkvpcPrivateSubnet2RouteTableAssociation9998E839": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "mycdkvpcPrivateSubnet2RouteTableE3606704"
    },
    "SubnetId": {
     "Ref": "mycdkvpcPrivateSubnet2SubnetC5D2ACEF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet2/RouteTableAssociation"
   }
  },
  "mycdkvpcPrivateSubnet2DefaultRouteFF924DDA": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "mycdkvpcPublicSubnet2NATGatewayE67C5CFB"
    },
    "RouteTableId": {
     "Ref": "mycdkvpcPrivateSubnet2RouteTableE3606704"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/PrivateSubnet2/DefaultRoute"
   }
  },
  "mycdkvpcIGW4220D5A9": {
   "Type": "AWS::EC2::InternetGateway",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/IGW"
   }
  },
  "mycdkvpcVPCGW2444B783": {
   "Type": "AWS::EC2::VPCGatewayAttachment",
   "Properties": {
    "InternetGatewayId": {
     "Ref": "mycdkvpcIGW4220D5A9"
    },
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/my-cdk-vpc/VPCGW"
   }
  },
  "gpuQueue70C24BE4": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "FifoQueue": true,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/gpuQueue/Resource"
   }
  },
  "cpuQueue833173B2": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "FifoQueue": true,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/cpuQueue/Resource"
   }
  },
  "instanceSg67C4465B": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/instanceSg",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "from 0.0.0.0/0:22",
      "FromPort": 22,
      "IpProtocol": "tcp",
      "ToPort": 22
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "VpcId": {
     "Ref": "mycdkvpc037DA4AF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/instanceSg/Resource"
   }
  },
  "GpuCluster0FC65A91": {
   "Type": "AWS::ECS::Cluster",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuCluster/Resource"
   }
  },
  "GpuCluster31D6EA94": {
   "Type": "AWS::ECS::ClusterCapacityProviderAssociations",
   "Properties": {
    "CapacityProviders": [
     {
      "Ref": "GpuAsgCapacityProvider6C10353E"
     }
    ],
    "Cluster": {
     "Ref": "GpuCluster0FC65A91"
    },
    "DefaultCapacityProviderStrategy": []
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuCluster/GpuCluster"
   }
  },
  "CpuCluster325DAC29": {
   "Type": "AWS::ECS::Cluster",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuCluster/Resource"
   }
  },
  "CpuCluster4621314A": {
   "Type": "AWS::ECS::ClusterCapacityProviderAssociations",
   "Properties": {
    "CapacityProviders": [
     {
      "Ref": "CpuAsgCapacityProvider91C50DB9"
     }
    ],
    "Cluster": {
     "Ref": "CpuCluster325DAC29"
    },
    "DefaultCapacityProviderStrategy": []
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuCluster/CpuCluster"
   }
  },
  "GPUASGInstanceRole1F98ED74": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ec2.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AWSAppSyncInvokeFullAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/InstanceRole/Resource"
   }
  },
  "GPUASGInstanceRoleDefaultPolicy78021A6A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecs:DeregisterContainerInstance",
        "ecs:RegisterContainerInstance",
        "ecs:Submit*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GpuCluster0FC65A91",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "ecs:Poll",
        "ecs:StartTelemetrySession"
       ],
       "Condition": {
        "ArnEquals": {
         "ecs:cluster": {
          "Fn::GetAtt": [
           "GpuCluster0FC65A91",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecs:DiscoverPollEndpoint",
        "ecr:GetAuthorizationToken",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GPUASGInstanceRoleDefaultPolicy78021A6A",
    "Roles": [
     {
      "Ref": "GPUASGInstanceRole1F98ED74"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/InstanceRole/DefaultPolicy/Resource"
   }
  },
  "GPUASGInstanceProfile8AC19733": {
   "Type": "AWS::IAM::InstanceProfile",
   "Properties": {
    "Roles": [
     {
      "Ref": "GPUASGInstanceRole1F98ED74"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/InstanceProfile"
   }
  },
  "GPUASGLaunchConfig274EDE22": {
   "Type": "AWS::AutoScaling::LaunchConfiguration",
   "Properties": {
    "IamInstanceProfile": {
     "Ref": "GPUASGInstanceProfile8AC19733"
    },
    "ImageId": {
     "Ref": "SsmParameterValueawsserviceecsoptimizedamiamazonlinux2gpurecommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter"
    },
    "InstanceType": "g4dn.xlarge",
    "SecurityGroups": [
     {
      "Fn::GetAtt": [
       "instanceSg67C4465B",
       "GroupId"
      ]
     }
    ],
    "UserData": {
     "Fn::Base64": {
      "Fn::Join": [
       "",
       [
        "Content-Type: multipart/mixed; boundary=\"+AWS+CDK+User+Data+Separator==\"\nMIME-Version: 1.0\n\n--+AWS+CDK+User+Data+Separator==\nContent-Type: text/x-shellscript; charset=\"utf-8\"\nContent-Transfer-Encoding: base64\n\n",
        {
         "Fn::Base64": {
          "Fn::Join": [
           "",
           [
            "#!/bin/bash\n#!/bin/bash\necho export SQS_QUEUE_URL=",
            {
             "Ref": "gpuQueue70C24BE4"
            },
            " >> /etc/profile\necho export SQS_REGION=",
            {
             "Ref": "AWS::Region"
            },
            " >> /etc/profile\necho ECS_CLUSTER=",
            {
             "Ref": "GpuCluster0FC65A91"
            },
            " >> /etc/ecs/ecs.config\nsudo iptables --insert FORWARD 1 --in-interface docker+ --destination 169.254.169.254/32 --jump DROP\nsudo service iptables save\necho ECS_AWSVPC_BLOCK_IMDS=true >> /etc/ecs/ecs.config"
           ]
          ]
         }
        },
        "\n--+AWS+CDK+User+Data+Separator==--\n"
       ]
      ]
     }
    }
   },
   "DependsOn": [
    "GPUASGInstanceRoleDefaultPolicy78021A6A",
    "GPUASGInstanceRole1F98ED74"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/LaunchConfig"
   }
  },
  "GPUASGCCD2D812": {
   "Type": "AWS::AutoScaling::AutoScalingGroup",
   "Properties": {
    "DesiredCapacity": "0",
    "LaunchConfigurationName": {
     "Ref": "GPUASGLaunchConfig274EDE22"
    },
    "MaxSize": "2",
    "MinSize": "0",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "PropagateAtLaunch": true,
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "PropagateAtLaunch": true,
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "PropagateAtLaunch": true,
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG"
     }
    ],
    "VPCZoneIdentifier": [
     {
      "Ref": "mycdkvpcPublicSubnet2Subnet33F973F6"
     }
    ]
   },
   "UpdatePolicy": {
    "AutoScalingScheduledAction": {
     "IgnoreUnmodifiedGroupSizeProperties": true
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/ASG"
   }
  },
  "GPUASGScaleOnQueueLengthLowerPolicy7B4FB88B": {
   "Type": "AWS::AutoScaling::ScalingPolicy",
   "Properties": {
    "AdjustmentType": "ChangeInCapacity",
    "AutoScalingGroupName": {
     "Ref": "GPUASGCCD2D812"
    },
    "MetricAggregationType": "Maximum",
    "PolicyType": "StepScaling",
    "StepAdjustments": [
     {
      "MetricIntervalUpperBound": 0,
      "ScalingAdjustment": -1
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/ScaleOnQueueLength/LowerPolicy/Resource"
   }
  },
  "GPUASGScaleOnQueueLengthLowerAlarm15A3C3AE": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "GPUASGScaleOnQueueLengthLowerPolicy7B4FB88B"
     }
    ],
    "AlarmDescription": "Lower threshold scaling alarm",
    "ComparisonOperator": "LessThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "gpuQueue70C24BE4",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG"
     }
    ],
    "Threshold": 0
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/ScaleOnQueueLength/LowerAlarm/Resource"
   }
  },
  "GPUASGScaleOnQueueLengthUpperPolicy2996EC9E": {
   "Type": "AWS::AutoScaling::ScalingPolicy",
   "Properties": {
    "AdjustmentType": "ChangeInCapacity",
    "AutoScalingGroupName": {
     "Ref": "GPUASGCCD2D812"
    },
    "MetricAggregationType": "Maximum",
    "PolicyType": "StepScaling",
    "StepAdjustments": [
     {
      "MetricIntervalLowerBound": 0,
      "ScalingAdjustment": 1
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/ScaleOnQueueLength/UpperPolicy/Resource"
   }
  },
  "GPUASGScaleOnQueueLengthUpperAlarm181F5C23": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "GPUASGScaleOnQueueLengthUpperPolicy2996EC9E"
     }
    ],
    "AlarmDescription": "Upper threshold scaling alarm",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "gpuQueue70C24BE4",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG"
     }
    ],
    "Threshold": 1
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/ScaleOnQueueLength/UpperAlarm/Resource"
   }
  },
  "GPUASGDrainECSHookFunctionServiceRoleD69D5C64": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/DrainECSHook/Function/ServiceRole/Resource"
   }
  },
  "GPUASGDrainECSHookFunctionServiceRoleDefaultPolicyDC677C30": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ec2:DescribeInstances",
        "ec2:DescribeInstanceAttribute",
        "ec2:DescribeInstanceStatus",
        "ec2:DescribeHosts"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "autoscaling:CompleteLifecycleAction",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":autoscaling:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":autoScalingGroup:*:autoScalingGroupName/",
          {
           "Ref": "GPUASGCCD2D812"
          }
         ]
        ]
       }
      },
      {
       "Action": [
        "ecs:DescribeContainerInstances",
        "ecs:DescribeTasks"
       ],
       "Condition": {
        "ArnEquals": {
         "ecs:cluster": {
          "Fn::GetAtt": [
           "GpuCluster0FC65A91",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecs:ListContainerInstances",
        "ecs:SubmitContainerStateChange",
        "ecs:SubmitTaskStateChange"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GpuCluster0FC65A91",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "ecs:UpdateContainerInstancesState",
        "ecs:ListTasks"
       ],
       "Condition": {
        "ArnEquals": {
         "ecs:cluster": {
          "Fn::GetAtt": [
           "GpuCluster0FC65A91",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GPUASGDrainECSHookFunctionServiceRoleDefaultPolicyDC677C30",
    "Roles": [
     {
      "Ref": "GPUASGDrainECSHookFunctionServiceRoleD69D5C64"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/DrainECSHook/Function/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GPUASGDrainECSHookFunctionEB868052": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "ZipFile": "import boto3, json, os, time\n\necs = boto3.client('ecs')\nautoscaling = boto3.client('autoscaling')\n\n\ndef lambda_handler(event, context):\n  print(json.dumps(dict(event, ResponseURL='...')))\n  cluster = os.environ['CLUSTER']\n  snsTopicArn = event['Records'][0]['Sns']['TopicArn']\n  lifecycle_event = json.loads(event['Records'][0]['Sns']['Message'])\n  instance_id = lifecycle_event.get('EC2InstanceId')\n  if not instance_id:\n    print('Got event without EC2InstanceId: %s', json.dumps(dict(event, ResponseURL='...')))\n    return\n\n  instance_arn = container_instance_arn(cluster, instance_id)\n  print('Instance %s has container instance ARN %s' % (lifecycle_event['EC2InstanceId'], instance_arn))\n\n  if not instance_arn:\n    return\n\n  task_arns = container_instance_task_arns(cluster, instance_arn)\n\n  if task_arns:\n    print('Instance ARN %s has task ARNs %s' % (instance_arn, ', '.join(task_arns)))\n\n  while has_tasks(cluster, instance_arn, task_arns):\n    time.sleep(10)\n\n  try:\n    print('Terminating instance %s' % instance_id)\n    autoscaling.complete_lifecycle_action(\n        LifecycleActionResult='CONTINUE',\n        **pick(lifecycle_event, 'LifecycleHookName', 'LifecycleActionToken', 'AutoScalingGroupName'))\n  except Exception as e:\n    # Lifecycle action may have already completed.\n    print(str(e))\n\n\ndef container_instance_arn(cluster, instance_id):\n  \"\"\"Turn an instance ID into a container instance ARN.\"\"\"\n  arns = ecs.list_container_instances(cluster=cluster, filter='ec2InstanceId==' + instance_id)['containerInstanceArns']\n  if not arns:\n    return None\n  return arns[0]\n\ndef container_instance_task_arns(cluster, instance_arn):\n  \"\"\"Fetch tasks for a container instance ARN.\"\"\"\n  arns = ecs.list_tasks(cluster=cluster, containerInstance=instance_arn)['taskArns']\n  return arns\n\ndef has_tasks(cluster, instance_arn, task_arns):\n  \"\"\"Return True if the instance is running tasks for the given cluster.\"\"\"\n  instances = ecs.describe_container_instances(cluster=cluster, containerInstances=[instance_arn])['containerInstances']\n  if not instances:\n    return False\n  instance = instances[0]\n\n  if instance['status'] == 'ACTIVE':\n    # Start draining, then try again later\n    set_container_instance_to_draining(cluster, instance_arn)\n    return True\n\n  task_count = None\n\n  if task_arns:\n    # Fetch details for tasks running on the container instance\n    tasks = ecs.describe_tasks(cluster=cluster, tasks=task_arns)['tasks']\n    if tasks:\n      # Consider any non-stopped tasks as running\n      task_count = sum(task['lastStatus'] != 'STOPPED' for task in tasks) + instance['pendingTasksCount']\n\n  if not task_count:\n    # Fallback to instance task counts if detailed task information is unavailable\n    task_count = instance['runningTasksCount'] + instance['pendingTasksCount']\n\n  print('Instance %s has %s tasks' % (instance_arn, task_count))\n\n  return task_count > 0\n\ndef set_container_instance_to_draining(cluster, instance_arn):\n  ecs.update_container_instances_state(\n      cluster=cluster,\n      containerInstances=[instance_arn], status='DRAINING')\n\n\ndef pick(dct, *keys):\n  \"\"\"Pick a subset of a dict.\"\"\"\n  return {k: v for k, v in dct.items() if k in keys}\n"
    },
    "Environment": {
     "Variables": {
      "CLUSTER": {
       "Ref": "GpuCluster0FC65A91"
      }
     }
    },
    "Handler": "index.lambda_handler",
    "Role": {
     "Fn::GetAtt": [
      "GPUASGDrainECSHookFunctionServiceRoleD69D5C64",
      "Arn"
     ]
    },
    "Runtime": "python3.9",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG"
     }
    ],
    "Timeout": 310
   },
   "DependsOn": [
    "GPUASGDrainECSHookFunctionServiceRoleDefaultPolicyDC677C30",
    "GPUASGDrainECSHookFunctionServiceRoleD69D5C64"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/DrainECSHook/Function/Resource"
   }
  },
  "GPUASGDrainECSHookFunctionAllowInvokeamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomdetwebGPUASGLifecycleHookDrainHookTopic0A1DAE783DD84C22": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GPUASGDrainECSHookFunctionEB868052",
      "Arn"
     ]
    },
    "Principal": "sns.amazonaws.com",
    "SourceArn": {
     "Ref": "GPUASGLifecycleHookDrainHookTopicD2D35C38"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/DrainECSHook/Function/AllowInvoke:amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomdetwebGPUASGLifecycleHookDrainHookTopic0A1DAE78"
   }
  },
  "GPUASGDrainECSHookFunctionTopic71E65DF6": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": {
     "Fn::GetAtt": [
      "GPUASGDrainECSHookFunctionEB868052",
      "Arn"
     ]
    },
    "Protocol": "lambda",
    "TopicArn": {
     "Ref": "GPUASGLifecycleHookDrainHookTopicD2D35C38"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/DrainECSHook/Function/Topic/Resource"
   }
  },
  "GPUASGLifecycleHookDrainHookTopicD2D35C38": {
   "Type": "AWS::SNS::Topic",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/LifecycleHookDrainHook/Topic/Resource"
   }
  },
  "GPUASGLifecycleHookDrainHookRole37AD3145": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "autoscaling.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/LifecycleHookDrainHook/Role/Resource"
   }
  },
  "GPUASGLifecycleHookDrainHookRoleDefaultPolicy78AB5943": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sns:Publish",
       "Effect": "Allow",
       "Resource": {
        "Ref": "GPUASGLifecycleHookDrainHookTopicD2D35C38"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GPUASGLifecycleHookDrainHookRoleDefaultPolicy78AB5943",
    "Roles": [
     {
      "Ref": "GPUASGLifecycleHookDrainHookRole37AD3145"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/LifecycleHookDrainHook/Role/DefaultPolicy/Resource"
   }
  },
  "GPUASGLifecycleHookDrainHook199F23DA": {
   "Type": "AWS::AutoScaling::LifecycleHook",
   "Properties": {
    "AutoScalingGroupName": {
     "Ref": "GPUASGCCD2D812"
    },
    "DefaultResult": "CONTINUE",
    "HeartbeatTimeout": 300,
    "LifecycleTransition": "autoscaling:EC2_INSTANCE_TERMINATING",
    "NotificationTargetARN": {
     "Ref": "GPUASGLifecycleHookDrainHookTopicD2D35C38"
    },
    "RoleARN": {
     "Fn::GetAtt": [
      "GPUASGLifecycleHookDrainHookRole37AD3145",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "GPUASGLifecycleHookDrainHookRoleDefaultPolicy78AB5943",
    "GPUASGLifecycleHookDrainHookRole37AD3145"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GPU_ASG/LifecycleHookDrainHook/Resource"
   }
  },
  "CPUASGInstanceRole73DB888C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ec2.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AWSAppSyncInvokeFullAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CPU_ASG"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CPU_ASG/InstanceRole/Resource"
   }
  },
  "CPUASGInstanceRoleDefaultPolicy3B99405A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecs:DeregisterContainerInstance",
        "ecs:RegisterContainerInstance",
        "ecs:Submit*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CpuCluster325DAC29",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "ecs:Poll",
        "ecs:StartTelemetrySession"
       ],
       "Condition": {
        "ArnEquals": {
         "ecs:cluster": {
          "Fn::GetAtt": [
           "CpuCluster325DAC29",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecs:DiscoverPollEndpoint",
        "ecr:GetAuthorizationToken",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CPUASGInstanceRoleDefaultPolicy3B99405A",
    "Roles": [
     {
      "Ref": "CPUASGInstanceRole73DB888C"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CPU_ASG/InstanceRole/DefaultPolicy/Resource"
   }
  },
  "CPUASGInstanceProfile3FA8F7F2": {
   "Type": "AWS::IAM::InstanceProfile",
   "Properties": {
    "Roles": [
     {
      "Ref": "CPUASGInstanceRole73DB888C"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CPU_ASG/InstanceProfile"
   }
  },
  "CPUASGLaunchConfig403A974F": {
   "Type": "AWS::AutoScaling::LaunchConfiguration",
   "Properties": {
    "IamInstanceProfile": {
     "Ref": "CPUASGInstanceProfile3FA8F7F2"
    },
    "ImageId": {
     "Ref": "SsmParameterValueawsserviceecsoptimizedamiamazonlinux2recommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter"
    },
    "InstanceType": "t3.small",
    "SecurityGroups": [
     {
      "Fn::GetAtt": [
       "instanceSg67C4465B",
       "GroupId"
      ]
     }
    ],
    "UserData": {
     "Fn::Base64": {
      "Fn::Join": [
       "",
       [
        "Content-Type: multipart/mixed; boundary=\"+AWS+CDK+User+Data+Separator==\"\nMIME-Version: 1.0\n\n--+AWS+CDK+User+Data+Separator==\nContent-Type: text/x-shellscript; charset=\"utf-8\"\nContent-Transfer-Encoding: base64\n\n",
        {
         "Fn::Base64": {
          "Fn::Join": [
           "",
           [
            "#!/bin/bash\n#!/bin/bash\necho export SQS_QUEUE_URL=",
            {
             "Ref": "gpuQueue70C24BE4"
            },
            " >> /etc/profile\necho export SQS_REGION=",
            {
             "Ref": "AWS::Region"
            },
            " >> /etc/profile\necho ECS_CLUSTER=",
            {
             "Ref": "CpuCluster325DAC29"
            },
            " >> /etc/ecs/ecs.config\nsudo iptables --insert FORWARD 1 --in-interface docker+ --destination 169.254.169.254/32 --jump DROP\nsudo service iptables save\necho ECS_AWSVPC_BLOCK_IMDS=true >> /etc/ecs/ecs.config"
           ]
          ]
         }
        },
        "\n--+AWS+CDK+User+Data+Separator==--\n"
       ]
      ]
     }
    }
   },
   "DependsOn": [
    "CPUASGInstanceRoleDefaultPolicy3B99405A",
    "CPUASGInstanceRole73DB888C"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CPU_ASG/LaunchConfig"
   }
  },
  "CPUASG8ED6CBC7": {
   "Type": "AWS::AutoScaling::AutoScalingGroup",
   "Properties": {
    "LaunchConfigurationName": {
     "Ref": "CPUASGLaunchConfig403A974F"
    },
    "MaxSize": "1",
    "MinSize": "0",
    "NewInstancesProtectedFromScaleIn": true,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "PropagateAtLaunch": true,
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "PropagateAtLaunch": true,
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "PropagateAtLaunch": true,
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CPU_ASG"
     }
    ],
    "VPCZoneIdentifier": [
     {
      "Ref": "mycdkvpcPublicSubnet1Subnet0CCFA225"
     },
     {
      "Ref": "mycdkvpcPublicSubnet2Subnet33F973F6"
     }
    ]
   },
   "UpdatePolicy": {
    "AutoScalingScheduledAction": {
     "IgnoreUnmodifiedGroupSizeProperties": true
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CPU_ASG/ASG"
   }
  },
  "GpuTaskDefinitionFE763327": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "SQS_QUEUE_URL",
        "Value": {
         "Ref": "gpuQueue70C24BE4"
        }
       },
       {
        "Name": "SQS_REGION",
        "Value": {
         "Ref": "AWS::Region"
        }
       },
       {
        "Name": "API_ENDPOINT",
        "Value": {
         "Fn::ImportValue": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66:ExportsOutputFnGetAttdata7552DF31Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataamplifyDataGraphQLAPI6B9858ACGraphQLUrlCA17D709"
        }
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Sub": "${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:ace22d86128fb60e22c56baf3ba6fb3e4977e27dcb3e1e93adf16c7a0f3ce783"
      },
      "MemoryReservation": 12288,
      "Name": "LightGlueContainer",
      "ResourceRequirements": [
       {
        "Type": "GPU",
        "Value": "1"
       }
      ]
     }
    ],
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "GpuTaskDefinitionExecutionRole848599DD",
      "Arn"
     ]
    },
    "Family": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomdetwebGpuTaskDefinitionF5D2DD00",
    "NetworkMode": "bridge",
    "RequiresCompatibilities": [
     "EC2"
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "EcsTaskRole8DFA0181",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuTaskDefinition/Resource"
   }
  },
  "GpuTaskDefinitionExecutionRole848599DD": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuTaskDefinition/ExecutionRole/Resource"
   }
  },
  "GpuTaskDefinitionExecutionRoleDefaultPolicy24CF0969": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":ecr:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":repository/",
          {
           "Fn::Sub": "cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}"
          }
         ]
        ]
       }
      },
      {
       "Action": "ecr:GetAuthorizationToken",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GpuTaskDefinitionExecutionRoleDefaultPolicy24CF0969",
    "Roles": [
     {
      "Ref": "GpuTaskDefinitionExecutionRole848599DD"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuTaskDefinition/ExecutionRole/DefaultPolicy/Resource"
   }
  },
  "CpuTaskDefinition8F2F7450": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "SQS_QUEUE_URL",
        "Value": {
         "Ref": "cpuQueue833173B2"
        }
       },
       {
        "Name": "SQS_REGION",
        "Value": {
         "Ref": "AWS::Region"
        }
       },
       {
        "Name": "API_ENDPOINT",
        "Value": {
         "Fn::ImportValue": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66:ExportsOutputFnGetAttdata7552DF31Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataamplifyDataGraphQLAPI6B9858ACGraphQLUrlCA17D709"
        }
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Sub": "${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:633be0899c0b63dd99d1a60dba77f2563713d2ae36d716283fc0d719e7b78e03"
      },
      "MemoryReservation": 1024,
      "Name": "PointFinderContainer"
     }
    ],
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "CpuTaskDefinitionExecutionRole4EC8F88C",
      "Arn"
     ]
    },
    "Family": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomdetwebCpuTaskDefinition863E2A13",
    "NetworkMode": "bridge",
    "RequiresCompatibilities": [
     "EC2"
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "EcsTaskRole8DFA0181",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuTaskDefinition/Resource"
   }
  },
  "CpuTaskDefinitionExecutionRole4EC8F88C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuTaskDefinition/ExecutionRole/Resource"
   }
  },
  "CpuTaskDefinitionExecutionRoleDefaultPolicy07836161": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":ecr:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":repository/",
          {
           "Fn::Sub": "cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}"
          }
         ]
        ]
       }
      },
      {
       "Action": "ecr:GetAuthorizationToken",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CpuTaskDefinitionExecutionRoleDefaultPolicy07836161",
    "Roles": [
     {
      "Ref": "CpuTaskDefinitionExecutionRole4EC8F88C"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuTaskDefinition/ExecutionRole/DefaultPolicy/Resource"
   }
  },
  "CpuServiceF8AFFDFD": {
   "Type": "AWS::ECS::Service",
   "Properties": {
    "Cluster": {
     "Ref": "CpuCluster325DAC29"
    },
    "DeploymentConfiguration": {
     "Alarms": {
      "AlarmNames": [],
      "Enable": false,
      "Rollback": false
     },
     "MaximumPercent": 200,
     "MinimumHealthyPercent": 50
    },
    "DesiredCount": 0,
    "EnableECSManagedTags": false,
    "EnableExecuteCommand": true,
    "LaunchType": "EC2",
    "SchedulingStrategy": "REPLICA",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "TaskDefinition": {
     "Ref": "CpuTaskDefinition8F2F7450"
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuService/Service"
   }
  },
  "CpuServiceTaskCountTarget35EB6F16": {
   "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
   "Properties": {
    "MaxCapacity": 1,
    "MinCapacity": 0,
    "ResourceId": {
     "Fn::Join": [
      "",
      [
       "service/",
       {
        "Ref": "CpuCluster325DAC29"
       },
       "/",
       {
        "Fn::GetAtt": [
         "CpuServiceF8AFFDFD",
         "Name"
        ]
       }
      ]
     ]
    },
    "RoleARN": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService"
      ]
     ]
    },
    "ScalableDimension": "ecs:service:DesiredCount",
    "ServiceNamespace": "ecs"
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuService/TaskCount/Target/Resource"
   }
  },
  "CpuServiceTaskCountTargetScaleOnQueueLengthLowerPolicy5B413564": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomdetwebCpuServiceTaskCountTargetScaleOnQueueLengthLowerPolicy5DF43B4F",
    "PolicyType": "StepScaling",
    "ScalingTargetId": {
     "Ref": "CpuServiceTaskCountTarget35EB6F16"
    },
    "StepScalingPolicyConfiguration": {
     "AdjustmentType": "ChangeInCapacity",
     "Cooldown": 60,
     "MetricAggregationType": "Maximum",
     "StepAdjustments": [
      {
       "MetricIntervalUpperBound": 0,
       "ScalingAdjustment": -1
      }
     ]
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuService/TaskCount/Target/ScaleOnQueueLength/LowerPolicy/Resource"
   }
  },
  "CpuServiceTaskCountTargetScaleOnQueueLengthLowerAlarmF3124F96": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "CpuServiceTaskCountTargetScaleOnQueueLengthLowerPolicy5B413564"
     }
    ],
    "AlarmDescription": "Lower threshold scaling alarm",
    "ComparisonOperator": "LessThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "cpuQueue833173B2",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "Threshold": 0
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuService/TaskCount/Target/ScaleOnQueueLength/LowerAlarm/Resource"
   }
  },
  "CpuServiceTaskCountTargetScaleOnQueueLengthUpperPolicyEC4E37EF": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomdetwebCpuServiceTaskCountTargetScaleOnQueueLengthUpperPolicyF7558FF9",
    "PolicyType": "StepScaling",
    "ScalingTargetId": {
     "Ref": "CpuServiceTaskCountTarget35EB6F16"
    },
    "StepScalingPolicyConfiguration": {
     "AdjustmentType": "ChangeInCapacity",
     "Cooldown": 60,
     "MetricAggregationType": "Maximum",
     "StepAdjustments": [
      {
       "MetricIntervalLowerBound": 0,
       "ScalingAdjustment": 1
      }
     ]
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuService/TaskCount/Target/ScaleOnQueueLength/UpperPolicy/Resource"
   }
  },
  "CpuServiceTaskCountTargetScaleOnQueueLengthUpperAlarmC39A5D6A": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "CpuServiceTaskCountTargetScaleOnQueueLengthUpperPolicyEC4E37EF"
     }
    ],
    "AlarmDescription": "Upper threshold scaling alarm",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "cpuQueue833173B2",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "Threshold": 1
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuService/TaskCount/Target/ScaleOnQueueLength/UpperAlarm/Resource"
   }
  },
  "GpuService07A83A60": {
   "Type": "AWS::ECS::Service",
   "Properties": {
    "Cluster": {
     "Ref": "GpuCluster0FC65A91"
    },
    "DeploymentConfiguration": {
     "Alarms": {
      "AlarmNames": [],
      "Enable": false,
      "Rollback": false
     },
     "MaximumPercent": 200,
     "MinimumHealthyPercent": 50
    },
    "DesiredCount": 0,
    "EnableECSManagedTags": false,
    "EnableExecuteCommand": true,
    "LaunchType": "EC2",
    "SchedulingStrategy": "REPLICA",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "TaskDefinition": {
     "Ref": "GpuTaskDefinitionFE763327"
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuService/Service"
   }
  },
  "GpuServiceTaskCountTarget8BC41FEA": {
   "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
   "Properties": {
    "MaxCapacity": 1,
    "MinCapacity": 0,
    "ResourceId": {
     "Fn::Join": [
      "",
      [
       "service/",
       {
        "Ref": "GpuCluster0FC65A91"
       },
       "/",
       {
        "Fn::GetAtt": [
         "GpuService07A83A60",
         "Name"
        ]
       }
      ]
     ]
    },
    "RoleARN": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService"
      ]
     ]
    },
    "ScalableDimension": "ecs:service:DesiredCount",
    "ServiceNamespace": "ecs"
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuService/TaskCount/Target/Resource"
   }
  },
  "GpuServiceTaskCountTargetScaleOnQueueLengthLowerPolicy36424ECF": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomdetwebGpuServiceTaskCountTargetScaleOnQueueLengthLowerPolicyFE7DECE1",
    "PolicyType": "StepScaling",
    "ScalingTargetId": {
     "Ref": "GpuServiceTaskCountTarget8BC41FEA"
    },
    "StepScalingPolicyConfiguration": {
     "AdjustmentType": "ChangeInCapacity",
     "Cooldown": 60,
     "MetricAggregationType": "Maximum",
     "StepAdjustments": [
      {
       "MetricIntervalUpperBound": 0,
       "ScalingAdjustment": -1
      }
     ]
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuService/TaskCount/Target/ScaleOnQueueLength/LowerPolicy/Resource"
   }
  },
  "GpuServiceTaskCountTargetScaleOnQueueLengthLowerAlarm53779D67": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "GpuServiceTaskCountTargetScaleOnQueueLengthLowerPolicy36424ECF"
     }
    ],
    "AlarmDescription": "Lower threshold scaling alarm",
    "ComparisonOperator": "LessThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "gpuQueue70C24BE4",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "Threshold": 0
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuService/TaskCount/Target/ScaleOnQueueLength/LowerAlarm/Resource"
   }
  },
  "GpuServiceTaskCountTargetScaleOnQueueLengthUpperPolicy98EA8E80": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomdetwebGpuServiceTaskCountTargetScaleOnQueueLengthUpperPolicyDB1D6B45",
    "PolicyType": "StepScaling",
    "ScalingTargetId": {
     "Ref": "GpuServiceTaskCountTarget8BC41FEA"
    },
    "StepScalingPolicyConfiguration": {
     "AdjustmentType": "ChangeInCapacity",
     "Cooldown": 60,
     "MetricAggregationType": "Maximum",
     "StepAdjustments": [
      {
       "MetricIntervalLowerBound": 0,
       "ScalingAdjustment": 1
      }
     ]
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuService/TaskCount/Target/ScaleOnQueueLength/UpperPolicy/Resource"
   }
  },
  "GpuServiceTaskCountTargetScaleOnQueueLengthUpperAlarmB0282DB5": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "GpuServiceTaskCountTargetScaleOnQueueLengthUpperPolicy98EA8E80"
     }
    ],
    "AlarmDescription": "Upper threshold scaling alarm",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "gpuQueue70C24BE4",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "Threshold": 1
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuService/TaskCount/Target/ScaleOnQueueLength/UpperAlarm/Resource"
   }
  },
  "CpuAsgCapacityProvider91C50DB9": {
   "Type": "AWS::ECS::CapacityProvider",
   "Properties": {
    "AutoScalingGroupProvider": {
     "AutoScalingGroupArn": {
      "Ref": "CPUASG8ED6CBC7"
     },
     "ManagedScaling": {
      "Status": "ENABLED",
      "TargetCapacity": 100
     },
     "ManagedTerminationProtection": "ENABLED"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CpuAsgCapacityProvider/CpuAsgCapacityProvider"
   }
  },
  "GpuAsgCapacityProvider6C10353E": {
   "Type": "AWS::ECS::CapacityProvider",
   "Properties": {
    "AutoScalingGroupProvider": {
     "AutoScalingGroupArn": {
      "Ref": "GPUASGCCD2D812"
     },
     "ManagedTerminationProtection": "DISABLED"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/GpuAsgCapacityProvider/GpuAsgCapacityProvider"
   }
  },
  "inputsD1506E74": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "CorsConfiguration": {
     "CorsRules": [
      {
       "AllowedHeaders": [
        "*"
       ],
       "AllowedMethods": [
        "GET",
        "POST",
        "PUT",
        "DELETE",
        "HEAD"
       ],
       "AllowedOrigins": [
        "*"
       ],
       "ExposedHeaders": [
        "x-amz-server-side-encryption",
        "x-amz-request-id",
        "x-amz-id-2",
        "ETag"
       ]
      }
     ]
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/inputs/Resource"
   }
  },
  "SignedInUserManagedPolicyinputs07FA789D": {
   "Type": "AWS::IAM::ManagedPolicy",
   "Properties": {
    "Description": "Allow access to s3 bucket by signed in users.",
    "Path": "/",
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "Roles": [
     {
      "Fn::ImportValue": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66:ExportsOutputFnGetAttauth179371D7Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66authamplifyAuthauthenticatedUserRole2DDBF981Ref8BC148DE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/SignedInUserManagedPolicy_inputs/Resource"
   }
  },
  "outputs444C6E6C": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "CorsConfiguration": {
     "CorsRules": [
      {
       "AllowedHeaders": [
        "*"
       ],
       "AllowedMethods": [
        "GET",
        "POST",
        "PUT",
        "DELETE",
        "HEAD"
       ],
       "AllowedOrigins": [
        "*"
       ],
       "ExposedHeaders": [
        "x-amz-server-side-encryption",
        "x-amz-request-id",
        "x-amz-id-2",
        "ETag"
       ]
      }
     ]
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/outputs/Resource"
   }
  },
  "SignedInUserManagedPolicyoutputs7CA87244": {
   "Type": "AWS::IAM::ManagedPolicy",
   "Properties": {
    "Description": "Allow access to s3 bucket by signed in users.",
    "Path": "/",
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:PutObject",
        "s3:GetObject",
        "s3:DeleteObject"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "Roles": [
     {
      "Fn::ImportValue": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66:ExportsOutputFnGetAttauth179371D7Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66authamplifyAuthauthenticatedUserRole2DDBF981Ref8BC148DE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/SignedInUserManagedPolicy_outputs/Resource"
   }
  },
  "sharpLayer7B5FD301": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleArchitectures": [
     "x86_64",
     "arm64"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "02450c81eda2816dcf277695c7dd94ea5983bbe814149d04d850c1ed38363e45.zip"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/sharpLayer/Resource",
    "aws:asset:path": "asset.02450c81eda2816dcf277695c7dd94ea5983bbe814149d04d850c1ed38363e45",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "luxonLayer8E19E7CC": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleArchitectures": [
     "x86_64",
     "arm64"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "ddabf596bfd63d5a6c7fdaf805d3a82ad32d818a11ae4e1d122ee1a6005969d8.zip"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/luxonLayer/Resource",
    "aws:asset:path": "asset.ddabf596bfd63d5a6c7fdaf805d3a82ad32d818a11ae4e1d122ee1a6005969d8",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "exifreaderLayer32451E7A": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleArchitectures": [
     "x86_64",
     "arm64"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "48bd589eb383076f958bae7d3a8ff866679618e9fcd651f058b529258cd9a620.zip"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/exifreaderLayer/Resource",
    "aws:asset:path": "asset.48bd589eb383076f958bae7d3a8ff866679618e9fcd651f058b529258cd9a620",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/51TwW7bMAz9lt5Vrc22w46p23UBusGLi14LhmZcNrbkiVICw/C/D5LdxGlvPfHxkSKfKGqhr7/90FcXcJBLLHeXNW90X3jAnYKDPPcMje7XtiaVbU2yua0Zu+ie0MqIB4OUO7vlmtRvMFBReUo4IwZFuND9U4sx9JRnKg+bmrEIG0M+cie0tsHTI2xGASN/4pYiFhk8W3NMjuBulUfzB/w9eDpAp3LHe/B0KrwynpyhY8KoZPKW3gO+NGS8KgiDY9/dOxvapGFODEr+ie7/BgqpcQLxfqL7rA7iyUX6I8ygBWTf5c7uuSQ3u4moO1w8guxuacuG3y73nrHGAxtyM+4OFwW5PeM4rAkWCHUcViyQ2WC8Wkr1vn+S9o4bFARvBaFmU+l+GbwtRuc4jAcIBl8ya7ZcBXd8iA+phad2IqalmDFLfDt3nvLAW8IOa/pl7S51mxODwtqG8gAeX3S/rME1qXUEg6qh2ZSg+5/BHKvPcU6uYZHoPUBH7omcTKG5PygxovsibAQdt0edc//Rtpw2OYH4+O4ZRMiLvrW4I7dqoIqrSj7G9JpaK+yt625ASEHb1oxpdGfjPj2bq6Zfcc58ZqaDkq+6vwm4G0tOaDRRTkx4U58kD2pNYoMbdyoHBw3FVU7BwkPFpkp/b5aVWVOmjRyUsSXpV/myX1zp6+/66uJVmC9dMJ4b0uvR/get+Y3WhQQAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebCustom/detweb/CDKMetadata/Default"
   },
   "Condition": "CDKMetadataAvailable"
  }
 },
 "Parameters": {
  "SsmParameterValueawsserviceecsoptimizedamiamazonlinux2gpurecommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter": {
   "Type": "AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>",
   "Default": "/aws/service/ecs/optimized-ami/amazon-linux-2/gpu/recommended/image_id"
  },
  "SsmParameterValueawsserviceecsoptimizedamiamazonlinux2recommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter": {
   "Type": "AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>",
   "Default": "/aws/service/ecs/optimized-ami/amazon-linux-2/recommended/image_id"
  },
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Conditions": {
  "CDKMetadataAvailable": {
   "Fn::Or": [
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "af-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-northwest-1"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "il-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "sa-east-1"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-2"
       ]
      }
     ]
    }
   ]
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}